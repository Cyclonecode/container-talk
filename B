FROM node:14.15.3

RUN apt update
RUN apt install -y nano gcc curl

ARG PORT=1024

ENV PORT=$PORT

EXPOSE $PORT

# This thing first installs npm packages and then it copies the committed files as an overlay
WORKDIR /usr/src/app
COPY package*json ./

RUN npm install --production --no-optional
COPY . .
CMD ["node", "index.js"]